webpackJsonp([2],{Ofmm:function(e,t){},QE0B:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7I1f"),n={name:"UserView",data:function(){return{queryParam:{userName:"",account:""},channelList:[{id:0,channelName:"科技馆"},{id:1,channelName:"毛纪"},{id:2,channelName:"故宫"},{id:3,channelName:"国博"}],channelObj:{0:"科技馆",1:"毛纪",2:"故宫",3:"国博"},userData:[],page:{pageNum:1,pageSize:30,total:0},showDialog:!1,labelPosition:"right",formData:{},ownerList:[]}},mounted:function(){this.queryUser(),this.getAllUser()},methods:{queryUser:function(){var e=this;this.queryParam.page=this.page,Object(r.b)("/ticket/account/list",this.queryParam).then(function(t){0!=t.status?e.$notify.error({title:"查询失败",message:t.msg,duration:2e3}):(e.userData=t.data.list,e.page.total=t.data.total,e.page.pageSize=t.data.pageSize)})},addUser:function(){this.formData={},this.showDialog=!0},editUser:function(e){this.showDialog=!0,this.formData=e},deleteUser:function(e){var t=this;Object(r.a)("/ticket/account/del",{id:e}).then(function(e){0!=e.status?t.$notify.error({title:"失败",message:e.msg,duration:2e3}):(t.showDialog=!1,t.queryUser())})},frozenUser:function(e){var t=this;e.status=0==e.status?1:0,Object(r.b)("/ticket/account/update",e).then(function(e){0!=e.status?t.$notify.error({title:"失败",message:e.msg,duration:2e3}):t.queryUser()})},getAllUser:function(){var e=this;Object(r.b)("/ticket/user/list/all",{}).then(function(t){0!=t.status?e.$notify.error({title:"查询失败",message:t.msg,duration:2e3}):e.ownerList=t.data})},handleSizeChange:function(){},handleCurrentChange:function(){},onSubmit:function(){var e=this;this.formData?Object(r.b)("/ticket/account/update",this.formData).then(function(t){0!=t.status?e.$notify.error({title:"失败",message:t.msg,duration:2e3}):(e.showDialog=!1,e.queryUser())}):Object(r.b)("/ticket/account/add",this.formData).then(function(t){0!=t.status?e.$notify.error({title:"失败",message:t.msg,duration:2e3}):(e.showDialog=!1,e.queryUser())})},closeForm:function(){this.showDialog=!1}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticStyle:{"margin-top":"2em"},attrs:{inline:!0,model:e.queryParam}},[a("el-form-item",{attrs:{label:"账号名称"}},[a("el-input",{attrs:{placeholder:"用户名",clearable:""},model:{value:e.queryParam.userName,callback:function(t){e.$set(e.queryParam,"userName",t)},expression:"queryParam.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{attrs:{placeholder:"账号",clearable:""},model:{value:e.queryParam.account,callback:function(t){e.$set(e.queryParam,"account",t)},expression:"queryParam.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"渠道"}},[a("el-select",{attrs:{clearable:""},model:{value:e.queryParam.channel,callback:function(t){e.$set(e.queryParam,"channel",t)},expression:"queryParam.channel"}},e._l(e.channelList,function(e){return a("el-option",{key:e.id,attrs:{label:e.channelName,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所有者"}},[a("el-select",{attrs:{clearable:""},model:{value:e.queryParam.belongUser,callback:function(t){e.$set(e.queryParam,"belongUser",t)},expression:"queryParam.belongUser"}},e._l(e.ownerList,function(e){return a("el-option",{key:e.id,attrs:{label:e.nickName,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.queryUser}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.addUser}},[e._v("新建账号")])],1)],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.userData,border:"",height:"80vh"}},[a("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",[e._v(e._s(e.channelObj[r.channel]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否有效"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?e._e():a("el-link",{staticClass:"el-icon-success",attrs:{type:"success",underline:!1}}),e._v(" "),t.row.status?a("el-link",{attrs:{icon:"el-icon-error",type:"danger",underline:!1}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",prop:"option"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.editUser(t.row)}}},[e._v("编辑\n          ")]),e._v(" "),t.row.status?e._e():a("el-link",{attrs:{type:"danger"},on:{click:function(a){return e.frozenUser(t.row)}}},[e._v("禁用\n          ")]),e._v(" "),t.row.status?a("el-link",{attrs:{type:"danger"},on:{click:function(a){return e.frozenUser(t.row)}}},[e._v("启用\n          ")]):e._e(),e._v(" "),a("el-link",{attrs:{type:"danger"},on:{click:function(a){return e.deleteUser(t.row.id)}}},[e._v("删除\n          ")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.page.pageNum,"page-size":30,"page-sizes":[30,50,100],total:e.page.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{staticStyle:{height:"50em",overflow:"unset"},attrs:{top:"2vh",visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t}}},[a("el-form",{staticStyle:{"margin-left":"5vw"},attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.formData}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticClass:"inputStyle",model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"渠道"}},[a("el-select",{model:{value:e.formData.channel,callback:function(t){e.$set(e.formData,"channel",t)},expression:"formData.channel"}},e._l(e.channelList,function(e){return a("el-option",{key:e.id,attrs:{label:e.channelName,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所有者"}},[a("el-select",{attrs:{clearable:""},model:{value:e.formData.belongUser,callback:function(t){e.$set(e.formData,"belongUser",t)},expression:"formData.belongUser"}},e._l(e.ownerList,function(e){return a("el-option",{key:e.id,attrs:{label:e.nickName,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{staticClass:"inputStyle",model:{value:e.formData.account,callback:function(t){e.$set(e.formData,"account",t)},expression:"formData.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{staticClass:"inputStyle",model:{value:e.formData.pwd,callback:function(t){e.$set(e.formData,"pwd",t)},expression:"formData.pwd"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"20vw"},attrs:{type:"primary",round:""},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"warning",round:""},on:{click:e.closeForm}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,l,!1,function(e){a("Ofmm")},"data-v-54bc5ab0",null);t.default=o.exports}});
//# sourceMappingURL=2.771ec7f2b2a510c86df1.js.map